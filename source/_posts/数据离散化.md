---
title: 数据离散化
date: 2021-08-10 10:41:22
tags:
- 离散化
---
### 定义
离散化，就是当我们只关心数据的大小关系的时候，用排名代替原数据进行处理的一种预处理方法。他保持元序列大小关系的前提下把他映射成正整数。
比如一个元素要当数组下标，但是他很大，或者是负数，就会失败，这时候就要离散化。

例如我们有序列$A=[8,20,30,4,-20,4]$
* 我们先复制一个相同的序列B
* 然后对B进行排序，去重（去掉重复的元素）
   
  std::unique()会删除相邻的相同的元素，把后面的元素往前移动，并返回去重后容器中不重复序列的最后一个元素的下一个位置的地址，所以减去首地址就可以得到长度。
  ```c++
  sort(B,B+n);
  int L=unique(B,B+n)-B; // L是不重复的数量
  ```
* 那么现在$B=[-20,4,8,20,30]$
* 用一个数组C存储A中每个元素在B中的排名
  lower_bound()函数返回的是数组中大于等于的一个个元素的地址
  ```c++
  for(int i=0;i<n;++i){
      C[i]=lower_bound(B,B+L,A[i])-B+1
  }
  ```
* 现在$C=[3,4,5,2,1,2]$,就实现了离散化

完整代码
```C++
int B[maxn];
int C[maxn];
for(int i = 0;i<n;++i){
    B[i]=A[i];
}
sort(B,B+n);      // 排序
int L=unique(B,B+n)-B;  // 去重
// 存排名
for(int i = 0;i<n;++i){
    C[i]=lower_bound(B,B+L,A[i])-B+1;
}


```

